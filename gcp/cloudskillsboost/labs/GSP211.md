# 实验室简介：多个 VPC 网络
您将创建多个 VPC 网络和虚拟机实例，然后测试跨网络的连接。  
在本实验中，您将：
* 创建具有防火墙规则的自定义模式 VPC 网络。
* 使用 Compute Engine 创建虚拟机实例。
* 探索跨 VPC 网络的虚拟机实例的连接性。
* 创建具有多个网络接口的虚拟机实例。

# [概览](https://www.cloudskillsboost.google/course_sessions/5373683/labs/377208)
具体来说，您将创建两个具有防火墙规则和虚拟机实例的自定义模式网络（managementnet 和 privatenet），如下面的网络图所示：
![网络图](../images/GSP211-001.png)

# 目标
在本实验中，您将学习如何执行以下任务：
* 创建具有防火墙规则的自定义模式 VPC 网络
* 使用 Compute Engine 创建虚拟机实例
* 探索各 VPC 网络中虚拟机实例的连接情况
* 创建具有多个网络接口的虚拟机实例

# 设置和要求
略

# 任务 1. 创建具有防火墙规则的自定义模式 VPC 网络
创建两个自定义网络：managementnet 和 privatenet，以及允许 SSH、ICMP 和 RDP 入站流量的防火墙规则。

# 任务 2. 创建虚拟机实例
创建两个虚拟机实例：
* managementsubnet-us 中的 managementnet-us-vm
* privatesubnet-us 中的 privatenet-us-vm

# 任务 3. 探索虚拟机实例之间的连接情况
探索虚拟机实例之间的连接情况。具体来说，对比虚拟机实例位于同一可用区与位于同一 VPC 网络中的效果。  
* Ping 外部 IP 地址：您可以 ping 通所有虚拟机实例的外部 IP 地址，即使它们位于其他可用区或 VPC 网络中也是如此。这就证明了对这些实例的公共访问权限仅由您先前建立的 ICMP 防火墙规则控制。
* Ping 内部 IP 地址：您无法 ping 通 managementnet-us-vm 和 privatenet-us-vm 的内部 IP 地址，因为它们与 ping 操作的来源 (mynet-us-vm) 位于不同的 VPC 网络中，尽管它们位于同一可用区 (us-east1) 中。

# 任务 4. 创建具有多个网络接口的虚拟机实例
创建具有多个网络接口的虚拟机实例：  
创建在 privatesubnet-us、managementsubnet-us 和 mynetwork 中具有网络接口的 vm-appliance 实例。这些子网的 CIDR 范围不重叠，在创建具有多个网络接口控制器 (NIC) 的虚拟机时，必须满足此项要求。

---

探索网络接口详情：  
每个网络接口都有自己的内部 IP 地址，如此虚拟机实例便可与这些网络通信。

---

探索网络接口的连接情况：  
* 您可以使用 privatenet-us-vm 的名称 ping 通此实例，因为 VPC 网络具有内部 DNS 服务，允许您按 DNS 名称（而非内部 IP 地址）对实例进行寻址。如果内部 DNS 查询由实例主机名构成，则会解析为实例的主要接口 (nic0)。因此，在本例中，这仅适用于 privatenet-us-vm。
* 在具有多个接口的实例中，每个接口对于其所在子网都有一个路由。此外，该实例会有一个与主要接口 eth0 相关联的默认路由。除非手动配置，否则从某个实例流向任何目的地（直接关联的子网除外）的所有流量都将通过 eth0 上的默认路由传出该实例。

# 恭喜！
略

## 实验室简介：VPC 网络 - 控制访问
您将创建 NGINX Web 服务器，使用标记的防火墙规则控制对 Web 服务器的外部 HTTP 访问，并探索 IAM 角色和服务账户。  
在本实验中，您将：
* 创建 NGINX Web 服务器。
* 创建标记的防火墙规则。
* 创建具有 IAM 角色的服务账户。
* 探索网络管理员和安全管理员角色的权限。

## VPC 网络 - 控制访问 (GSP213)
# 概述
略

# 设置和要求
略

# 任务 1. 创建 Web 服务器
* 网络使用网络标签来识别哪些虚拟机实例受某些防火墙规则和网络路由的约束。

# 任务 2. 创建防火墙规则
* default-allow-internal 防火墙规则允许默认网络内所有协议/端口上的流量。

# 任务 3. 探索网络和安全管理员角色
* 网络管理员 (Network Admin)：创建、修改和删除网络资源的权限，防火墙规则和 SSL 证书除外。
* 安全管理员 (Security Admin)：创建、修改和删除防火墙规则和 SSL 证书的权限。\

# 恭喜！
