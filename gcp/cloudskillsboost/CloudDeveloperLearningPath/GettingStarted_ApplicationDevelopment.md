# 欢迎 - 使用 Google Cloud 开发应用程序
本模块介绍课程系列和课程结构。

## 欢迎来到课程系列
此路径专为负责设计、开发、部署和维护云中应用程序的 IT 专业人员（例如云开发人员和云 DevOps 工程师）而设计。

您将首先学习一些应用程序开发的最佳实践。然后，您将了解如何实施使用 Google Cloud 服务进行数据存储、应用程序组件之间的集成、安全性和可靠性的应用程序。如果您不确定是否在 Compute Engine、Google Kubernetes Engine、Cloud Run 中运行应用程序，或其他环境，我们有正确的信息来帮助您做出选择。

## 系列课程涵盖的主题
使用 Google Cloud 开发应用程序分为三门课程。  
1. 应用程序开发入门。
2. 保护和集成应用程序组件
3. 应用程序部署、调试和性能。

## 欢迎来到课程
略

## 课程信息
略

# 应用程序开发的最佳实践
本模块介绍应用程序开发的最佳实践。

## 松耦合微服务和 API 网关
### 云中运行的应用程序
* 全球影响力：您的应用程序应该能够响应并可供世界各地的用户访问。
* 可扩展性和高可用性：您的应用程序应该能够可靠地处理高流量。应用程序架构应利用底层云平台的功能来弹性扩展以响应负载的变化。
* 安全性：您的应用程序和底层基础设施应该实施安全最佳实践。根据使用案例，出于安全和合规性原因，您可能需要隔离特定区域中的用户数据。

### 管理应用程序的代码和环境
![管理应用程序的代码和环境](../images/manage-code-env.png)  
* 将应用程序的代码存储在版本控制系统（例如 Git 或 Subversion）的代码存储库中。这将使您能够跟踪源代码的更改并设置持续集成和交付的系统。
* 不要在代码存储库中存储外部依赖项，例如 JAR 文件或外部包。相反，根据您的应用程序平台，显式声明您的依赖项及其版本，并使用依赖项管理器安装它们。例如，对于 Node.js 应用程序，您可以在 package.json 文件中声明应用程序依赖项，然后使用 npm install 命令安装它们。
* 将应用程序的配置设置与代码分开。不要将配置设置存储为源代码中的常量。相反，请将配置设置指定为环境变量。这使您能够轻松修改开发、测试和生产环境之间的设置。

### 考虑实施微服务
不要实现单一应用程序，而是考虑将应用程序实现或重构为一组微服务。服务边界匹配业务边界，代码库是模块化的，每个服务都可以独立更新、部署和扩展

### 执行异步操作
远程操作的响应时间可能无法预测，并且可能使您的应用程序看起来很慢。尽量减少用户线程中的操作。异步执行后端操作。

尽可能使用事件驱动的处理。例如，如果您的应用程序处理用户上传的图片，您可以使用 Cloud Storage 存储分区来存储上传的图片。然后，您可以实现一个云函数，每当上传新图像时就会触发该函数。云功能处理图像并将结果上传到不同的云存储位置。

### 松耦合设计
设计应用程序组件，以便它们在运行时松散耦合。紧密耦合的组件可能会降低应用程序对故障、流量峰值和服务更改的弹性。

中间组件（如消息队列）可用于实现松耦合、执行异步处理以及在流量激增时缓冲请求。您可以将 Pub/Sub 主题用作消息队列。发布者可以向主题发布消息，订阅者可以订阅来自该主题的消息。

在 HTTP API 有效负载的上下文中，HTTP API 的使用者应与 API 的发布者松散绑定。

### 实现无状态组件以实现可伸缩性
实现应用程序组件，以便它们不会在内部存储状态或访问共享状态。访问共享状态是可伸缩性的常见瓶颈。设计每个应用程序组件，使其仅专注于计算任务。此方法使您能够使用 Worker 模式来添加或删除组件的其他实例，以实现可伸缩性。应用程序组件应快速启动以实现高效扩展，并在收到终止信号时正常关闭。

### 缓存内容
缓存内容可以提高应用程序性能并降低网络延迟。

### 实施 API 网关，使后端功能可供使用者应用程序使用
![API 网关](../images/API-gateways.png)  
* 您可以使用 Cloud Endpoints 根据 OpenAPI 规范开发、部署、保护和监控 API。
* 使用 Apigee API 平台，您可以为传统后端设计、保护、分析和扩展 API。

## 安全性、可靠性和迁移
### 使用联合身份管理
将用户身份验证委托给外部身份提供商，例如 Google、Facebook、Twitter 或 GitHub。这将最大程度地减少用户管理的工作量。使用联合身份管理，您无需实施、保护和扩展专有解决方案来对用户进行身份验证。

### 实施运行状况检查终结点
请务必监视应用程序和服务的状态，以确保它们始终可用并以最佳方式执行。监控数据可用于在系统开始出现故障时立即自动向运营团队发出警报。然后，运营团队可以及时诊断和解决问题。

### 设置日志记录并监视应用程序的性能
将日志视为事件流。日志构成一个连续的事件流，只要应用程序正在运行，这些事件就会不断发生。不要管理应用程序中的日志文件。相反，写入事件流（如 stdout），并让底层基础结构整理所有事件，以便以后进行分析和存储。使用此方法，您可以设置基于日志的指标，并跨应用程序中的不同服务跟踪请求。

借助 Google Cloud 的运维套件，您可以调试应用、设置错误报告、设置基于日志记录和日志的指标、跨服务跟踪请求，以及监控在多云环境中运行的应用。

### 优雅地处理暂时性和长期性错误
在访问分布式系统中的服务和资源时，应用程序需要能够灵活应对临时和长期的错误。  
由于暂时性网络错误，资源有时会变得不可用。在这种情况下，应用程序应实现具有指数退避的重试逻辑，如果错误仍然存在，则正常失败。云客户端库会自动重试失败的请求。  
当错误持续时间更长时，应用程序不应浪费 CPU 周期尝试重试请求。在这种情况下，应用程序应实现断路器并正常处理故障。  
对于传播回用户的错误，请考虑正常降级应用程序，而不是显式显示错误消息。例如，如果推荐引擎已关闭，请考虑隐藏页面上的产品推荐区域，而不是在每次显示页面时都显示错误消息。

### 考虑数据主权和合规性要求
一些地区和行业部门对数据保护和消费者隐私有严格的合规要求。

### 执行高可用性测试并制定灾难恢复计划
除了执行功能和性能测试外，还要执行高可用性测试。此类测试将使您能够制定可靠的灾难恢复计划，并定期执行灾难恢复练习。

### 实施持续集成和持续交付管道
通过自动化实施强大的 DevOps 模型，以实现持续集成和交付 （CI/CD）。自动化可帮助您提高发布速度和可靠性。借助强大的 CI/CD 管道，您可以以增量方式测试和推出更改，而不是通过多个更改进行大规模发布。此方法使你能够降低回归风险，快速调试问题，并在必要时回滚到上一个稳定版本。

在持续集成系统中，开发人员将代码提交到代码存储库（如 Git）中。构建系统（如 Jenkins）会自动检测对存储库的提交、触发构建并运行单元测试。生成系统为所有必需的运行时环境生成部署工件。

在持续交付系统中，部署系统（如 Spinnaker）会自动触发将构建部署到测试环境。您可以自动执行集成、安全和性能测试，然后将成功的构建部署到生产环境。将内部版本部署到生产环境时，请考虑执行金丝雀测试或蓝/绿部署，以确保任何意外问题都不会影响大量用户。

### 使用扼杀者模式重新构建应用程序
在重新构建和迁移大型应用程序时，请考虑使用 Strangler 模式。在迁移的早期阶段，您可能会将旧应用程序的较小组件替换为较新的应用程序组件或服务。您可以逐步将原始应用程序的更多功能替换为新服务。

## 练习测验：应用程序开发的最佳实践
略

## 最终测验：应用程序开发的最佳实践
略

# Google 云开发入门
本模块介绍了用于托管应用程序的不同 Google Cloud 平台。

## Google Cloud 开发入门
在本模块中，您将学习如何为您的应用和脚本访问这些服务。您将了解 Cloud API 和 Google Cloud SDK，它们允许您以编程方式将这些功能包含在您的应用中。 云客户端库通过使用每种受支持语言的自然约定和样式来提供优化的开发人员体验。您还将了解 Cloud Code，这将帮助您在集成开发环境中开发 Google Cloud 应用。

### Cloud API 为 Google Cloud 服务提供编程接口
Cloud API 为 Google Cloud 服务提供编程接口。您可以通过调用相应的 Cloud API 在应用中使用 Google Cloud 资源或服务。

### 将 Google Cloud SDK 与 Google Cloud 结合使用
Google Cloud SDK 用于与 Google Cloud 产品和服务进行交互。  
* SDK 功能分为两类：命令行工具和特定于语言的云客户端库。
* 这些工具和库使用 Cloud API 与 Google Cloud 进行通信。

### 使用 Google Cloud CLI （gcloud CLI）
* 提供用于管理大多数 Google Cloud 服务的工具。
* 在命令行或自动脚本中使用。
* 工具包装了 Cloud API

#### 借助 gcloud CLI 工具，您可以在 Google Cloud 上执行最常见的任务
#### 使用命令行工具 gcloud storage 管理 Cloud Storage
#### bq 是 BigQuery 的命令行工具

### 云客户端库
* 比直接 API 调用更易于使用。
* 是从应用发出 Cloud API 请求的推荐方法。
* 提供优化的开发人员体验。
* 使用每种语言的自然惯例和风格。
* 从 gRPC API 获得性能优势。

### Cloud Shell
Cloud Shell 是一台免费的管理计算机，可通过 Google Cloud Console 进行基于浏览器的命令行访问。  
* 基于浏览器访问临时虚拟机
  * 5 GB的永久性磁盘存储
  * 预装了 Google Cloud SDK
* 对 Google Cloud Console 项目和资源的内置授权
* 内置代码编辑器

### 使用 Cloud Code 在您喜欢的 IDE 中开发云应用程序
* 借助 IDE 插件，可以更轻松地创建、部署和调试云原生应用程序。
* 适用于 VSCode、JetBrains IDE（包括 IntelliJ）和 Cloud Shell 编辑器。
* IDE 简化了常见的工作流程。
* 与 Secret Manager 集成以安全地存储敏感数据。
* 管理云 API 和云客户端库。

### 借助 Cloud Code for Kubernetes，您可以在 IDE 中开发 Kubernetes 应用
* 在本地集群或 Google Kubernetes Engine （GKE） 上运行和调试 Kubernetes 应用程序。
* 使用 Kubernetes Explorer 可视化和管理 Kubernetes 资源。
* YAML 创作帮助为 Kubernetes 配置文件提供自动完成和内联文档。

### Cloud Code 也适用于 Cloud Run
* 使用 Cloud Run Emulator 在本地运行服务并进行调试。
* 从 IDE 将应用部署到 Cloud Run。
* 使用 Cloud Run Explorer 管理 Cloud Run 服务。

### 将模拟器用于 Google Cloud 服务
* 使用 gcloud beta 版模拟器安装和管理模拟器。
* 从使用本地模拟器切换到使用 Google Cloud emulators 服务，而无需更改应用代码。
* 在不消耗项目资源的情况下开发应用程序。

## 练习测验：Google Cloud 开发入门

## Lab 搭建开发环境

## 应用程序开发 - 设置开发环境：Java 

## 最终测验：Google Cloud 开发入门

## 模块复习

# 数据存储选项概述
本模块介绍了 Google Cloud 中应用程序可用的各种数据存储选项。

# 使用数据存储的最佳实践
本模块涵盖使用数据存储的最佳实践。

# 使用云存储的最佳实践
本模块涵盖使用云存储的最佳实践。